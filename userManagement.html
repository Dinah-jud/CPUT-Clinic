<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>User Management</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: Arial, sans-serif; background-color: #f5f7fa; color: #333; display: flex; flex-direction: column; min-height: 100vh; }

    .header { background-color: #003865; color: white; padding: 1rem 2rem; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    .header img { width: 60px; margin-right: 15px; }
    .header-title { font-size: 1.4rem; font-weight: bold; }
    .profile-section { display: flex; align-items: center; gap: 10px; cursor: pointer; }

    .container { display: flex; flex: 1; min-height: calc(100vh - 140px); }

    .sidebar { width: 250px; background-color: #fff; box-shadow: 2px 0 5px rgba(0,0,0,0.1); padding: 1rem 0; }
    .nav-item { padding: 1rem 2rem; display: flex; align-items: center; gap: 10px; cursor: pointer; color: #003865; font-weight: bold; transition: background 0.3s; }
    .nav-item:hover, .nav-item.active { background-color: #e8f4fc; border-left: 4px solid #0072CE; }
    .nav-item i { color: #0072CE; width: 20px; text-align: center; }

    .main-content { flex: 1; padding: 2rem; }
    .main-content h2 { font-size: 1.8rem; margin-bottom: 1.5rem; color: #003865; }

    .tabs { display: flex; gap: 10px; margin-bottom: 20px; }
    .tab-btn { background-color: #e8f4fc; color: #003865; border: none; padding: 10px 20px; cursor: pointer; font-weight: bold; border-radius: 5px; transition: 0.3s; }
    .tab-btn.active, .tab-btn:hover { background-color: #0072CE; color: white; }

    .actions { display: flex; justify-content: flex-end; align-items: center; margin-bottom: 1rem; gap: 10px; flex-wrap: wrap; }
    .actions button { padding: 0.5rem 1rem; border-radius: 5px; border: none; font-size: 1rem; cursor: pointer; background-color: #0072CE; color: white; transition: 0.3s; }
    .actions button:hover { background-color: #005fa3; }

    table { width: 100%; border-collapse: collapse; background: white; box-shadow: 0 2px 10px rgba(0,0,0,0.1); border-radius: 10px; overflow: hidden; }
    th, td { text-align: left; padding: 1rem; border-bottom: 1px solid #eee; }
    th { background-color: #0072CE; color: white; }
    tr:hover { background-color: #f1f9ff; }
    .action-icons i { margin-right: 10px; cursor: pointer; color: #0072CE; transition: 0.3s; }
    .action-icons i:hover { color: #005fa3; }

    /* Modal */
    .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.4); justify-content: center; align-items: center; }
    .modal-content { background: white; padding: 2rem; border-radius: 10px; width: 400px; position: relative; }
    .modal-content h3 { margin-bottom: 1rem; color: #003865; }
    .modal-content label { display: block; margin-top: 10px; font-weight: bold; }
    .modal-content input { width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 5px; margin-top: 5px; }
    .modal-buttons { display: flex; justify-content: flex-end; gap: 10px; margin-top: 20px; }
    .close-btn { position: absolute; top: 10px; right: 15px; font-size: 1.3rem; cursor: pointer; color: #333; }

    footer { background-color: #012773; color: white; padding: 30px 0; margin-top: auto; }
    .footer-content { display: flex; justify-content: space-around; flex-wrap: wrap; max-width: 1200px; margin: 0 auto; padding: 0 20px; }
    .footer-section { flex: 1; min-width: 250px; margin: 10px; }
  </style>
</head>
<body>

  <header class="header">
    <div class="logo-container">
      <img src="images/cput-logo.png" alt="CPUT Logo">
      <div class="header-title">CPUT Clinic - Admin</div>
    </div>
    <div class="profile-section">
      <i class="fas fa-user-circle fa-2x"></i>
      <span>Admin Name</span>
      <i class="fas fa-sign-out-alt" style="margin-left:10px; cursor:pointer;" onclick="alert('Logging out...')"></i>
    </div>
  </header>

  <div class="container">
    <aside class="sidebar">
  <div class="nav-item"><a href="adminDashboard.html"><i class="fas fa-tachometer-alt"></i> Dashboard</a></div>
  <div class="nav-item active"><a href="userManagement.html"><i class="fas fa-users-cog"></i> User Management</a></div>
  <div class="nav-item"><a href="manageAvailability.html"><i class="fas fa-calendar-check"></i> Manage Availability</a></div>
  <div class="nav-item"><a href="update-profile.html"><i class="fas fa-user-edit"></i> Update Profile</a></div>
    </aside>

    <main class="main-content">
      <h2>User Management</h2>

      <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('patients')">Patients</button>
        <button class="tab-btn" onclick="switchTab('doctors')">Doctors</button>
        <button class="tab-btn" onclick="switchTab('admins')">Admins</button>
      </div>

      <!-- Patients -->
      <section id="patients" class="tab-content">
        <div class="actions">
          <button onclick="openModal('patient')"><i class="fas fa-plus"></i> Add Patient</button>
        </div>
        <table>
          <thead><tr><th>ID</th><th>Name</th><th>Email</th><th>Phone</th><th>Actions</th></tr></thead>
          <tbody id="patients-body"></tbody>
        </table>
      </section>

      <!-- Doctors -->
      <section id="doctors" class="tab-content" style="display:none;">
        <div class="actions">
          <button onclick="openModal('doctor')"><i class="fas fa-plus"></i> Add Doctor</button>
        </div>
        <table>
          <thead><tr><th>ID</th><th>Name</th><th>Email</th><th>Phone</th><th>Actions</th></tr></thead>
          <tbody id="doctors-body"></tbody>
        </table>
      </section>

      <!-- Admins -->
      <section id="admins" class="tab-content" style="display:none;">
        <div class="actions">
          <button onclick="openModal('admin')"><i class="fas fa-plus"></i> Add Admin</button>
        </div>
        <table>
          <thead><tr><th>ID</th><th>Name</th><th>Email</th><th>Phone</th><th>Actions</th></tr></thead>
          <tbody id="admins-body"></tbody>
        </table>
      </section>
    </main>
  </div>

  <!-- Modal -->
  <div id="userModal" class="modal">
    <div class="modal-content">
      <span class="close-btn" onclick="closeModal()">&times;</span>
      <h3 id="modalTitle">Add User</h3>
      <form id="userForm">
        <input type="hidden" id="userRole">
        <input type="hidden" id="editId">

        <label for="name">Full Name</label>
        <input type="text" id="name" required>

        <label for="email">Email</label>
        <input type="email" id="email" required>

        <label for="phone">Phone</label>
        <input type="text" id="phone" required>

        <div class="modal-buttons">
          <button type="button" onclick="saveUser()">Save</button>
          <button type="button" onclick="closeModal()">Cancel</button>
        </div>
      </form>
    </div>
  </div>

  <footer>
    <div class="footer-content">
      <div class="footer-section">
        <p>Â© 2025 CPUT Clinic Dashboard</p>
      </div>
    </div>
  </footer>

<script>
let currentRole = '';
let editing = false;

function switchTab(tabName) {
  document.querySelectorAll('.tab-content').forEach(s => s.style.display = 'none');
  document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
  document.getElementById(tabName).style.display = 'block';
  event.target.classList.add('active');
}

function openModal(role, id = null) {
  currentRole = role;
  editing = !!id;
  document.getElementById('userRole').value = role;
  document.getElementById('editId').value = id || '';

  document.getElementById('modalTitle').innerText = editing ? 'Edit ' + capitalize(role) : 'Add ' + capitalize(role);
  document.getElementById('userForm').reset();

  if (editing) {
    const row = document.querySelector(`#${role}s-body tr[data-id="${id}"]`);
    if (row) {
      document.getElementById('name').value = row.children[1].textContent;
      document.getElementById('email').value = row.children[2].textContent;
      document.getElementById('phone').value = row.children[3].textContent;
    }
  }

  document.getElementById('userModal').style.display = 'flex';
}

function closeModal() {
  document.getElementById('userModal').style.display = 'none';
}

function saveUser() {
  const role = document.getElementById('userRole').value;
  const name = document.getElementById('name').value.trim();
  const email = document.getElementById('email').value.trim();
  const phone = document.getElementById('phone').value.trim();
  const tbody = document.getElementById(role + 's-body');

  if (!name || !email || !phone) return alert('Please fill all fields');

  // Email validation
  const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  if (!emailPattern.test(email)) return alert('Please enter a valid email address');

  // Phone validation: digits only, 10 characters
  const phonePattern = /^\d{10}$/;
  if (!phonePattern.test(phone)) return alert('Phone number must be exactly 10 digits');

  if (editing) {
    const id = document.getElementById('editId').value;
    const row = tbody.querySelector(`tr[data-id="${id}"]`);
    if (row) {
      row.children[1].textContent = name;
      row.children[2].textContent = email;
      row.children[3].textContent = phone;
    }
  } else {
    const newId = role.charAt(0).toUpperCase() + Math.floor(Math.random() * 1000).toString().padStart(3, '0');
    const newRow = document.createElement('tr');
    newRow.setAttribute('data-id', newId);
    newRow.innerHTML = `
      <td>${newId}</td>
      <td>${name}</td>
      <td>${email}</td>
      <td>${phone}</td>
      <td class="action-icons">
        <i class="fas fa-edit" onclick="openModal('${role}', '${newId}')"></i>
        <i class="fas fa-trash" onclick="deleteUser('${role}', '${newId}')"></i>
      </td>`;
    tbody.appendChild(newRow);
  }

  closeModal();
}

function deleteUser(role, id) {
  if (confirm('Are you sure you want to delete ' + id + '?')) {
    const row = document.querySelector(`#${role}s-body tr[data-id="${id}"]`);
    if (row) row.remove();
  }
}

function capitalize(str) {
  return str.charAt(0).toUpperCase() + str.slice(1);
}
</script>


</body>
</html>
