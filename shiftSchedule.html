<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Shift Schedule | Admin Dashboard</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * { box-sizing: border-box; margin:0; padding:0; }
    body { font-family: Arial, sans-serif; background-color: #f5f7fa; color: #333; display: flex; flex-direction: column; min-height: 100vh; }

    .header { background-color: #003865; color: white; padding:1rem 2rem; display: flex; justify-content: space-between; align-items: center; }
    .header img { width: 60px; margin-right: 15px; }
    .header-title { font-size:1.4rem; font-weight:bold; }
    .profile-section { display:flex; align-items:center; gap:10px; cursor:pointer; }

    .container { display:flex; flex:1; min-height: calc(100vh - 140px); }
    .sidebar { width:250px; background-color:#fff; box-shadow:2px 0 5px rgba(0,0,0,0.1); padding:1rem 0; }
    .nav-item { padding:1rem 2rem; display:flex; align-items:center; gap:10px; cursor:pointer; color:#003865; font-weight:bold; }
    .nav-item:hover, .nav-item.active { background-color:#e8f4fc; border-left:4px solid #0072CE; }
    .nav-item i { color:#0072CE; width:20px; text-align:center; }

    .main-content { flex:1; padding:2rem; }
    .main-content h2 { font-size:1.8rem; margin-bottom:1.5rem; color:#003865; }

    .actions { display:flex; justify-content:flex-end; margin-bottom:1rem; gap:10px; flex-wrap:wrap; }
    .actions button { padding:0.5rem 1rem; border-radius:5px; border:none; font-size:1rem; cursor:pointer; background-color:#0072CE; color:white; }
    .actions button:hover { background-color:#005fa3; }

    table { width:100%; border-collapse: collapse; background:white; box-shadow:0 2px 10px rgba(0,0,0,0.1); border-radius:10px; overflow:hidden; }
    th, td { text-align:left; padding:1rem; border-bottom:1px solid #eee; }
    th { background-color:#0072CE; color:white; }
    tr:hover { background-color:#f1f9ff; }
    .action-icons i { margin-right:10px; cursor:pointer; color:#0072CE; }
    .action-icons i:hover { color:#005fa3; }

    /* Modal */
    .modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.4); justify-content:center; align-items:center; }
    .modal-content { background:white; padding:2rem; border-radius:10px; width:400px; position:relative; }
    .modal-content h3 { margin-bottom:1rem; color:#003865; }
    .modal-content label { display:block; margin-top:10px; font-weight:bold; }
    .modal-content input, .modal-content select { width:100%; padding:0.5rem; border:1px solid #ccc; border-radius:5px; margin-top:5px; }
    .modal-buttons { display:flex; justify-content:flex-end; gap:10px; margin-top:20px; }
    .close-btn { position:absolute; top:10px; right:15px; font-size:1.3rem; cursor:pointer; color:#333; }

    footer { background-color:#012773; color:white; padding:30px 0; margin-top:auto; }
    .footer-content { display:flex; justify-content:space-around; flex-wrap:wrap; max-width:1200px; margin:0 auto; padding:0 20px; }
  </style>
</head>
<body>

<header class="header">
  <div class="logo-container">
    <img src="images/cput-logo.png" alt="CPUT Logo">
    <div class="header-title">CPUT Clinic - Admin Dashboard</div>
  </div>
  <div class="profile-section">
    <i class="fas fa-user-circle fa-2x"></i>
    <span>Admin Name</span>
    <i class="fas fa-sign-out-alt" style="margin-left:10px; cursor:pointer;" onclick="alert('Logging out...')"></i>
  </div>
</header>

<div class="container">
  <aside class="sidebar">
      <div class="nav-item"><i class="fas fa-tachometer-alt"></i> Dashboard</div>
      <div class="nav-item"><i class="fas fa-users-cog"></i> User Management</div>
      <div class="nav-item active"><i class="fas fa-calendar-check"></i> Shift Schedule</div>
      <div class="nav-item"><i class="fas fa-calendar-check"></i> Appointments</div>
      <div class="nav-item"><i class="fas fa-prescription-bottle-alt"></i> Report and Analytics</div>
      <div class="nav-item"><i class="fas fa-user-edit"></i> Update Profile</div>
  </aside>

  <main class="main-content">
    <h2>Shift Schedule</h2>
    <div class="actions">
      <button onclick="openShiftModal()"><i class="fas fa-plus"></i> Add Shift</button>
    </div>

    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Doctor</th>
          <th>Date</th>
          <th>Start Time</th>
          <th>End Time</th>
          <th>Availability</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="shift-body"></tbody>
    </table>
  </main>
</div>

<!-- Shift Modal -->
<div id="shiftModal" class="modal">
  <div class="modal-content">
    <span class="close-btn" onclick="closeShiftModal()">&times;</span>
    <h3 id="shiftModalTitle">Add Shift</h3>
    <form id="shiftForm">
      <input type="hidden" id="shiftId">

      <label for="doctorSelect">Doctor</label>
      <select id="doctorSelect" required>
        <option value="">-- Select Doctor --</option>
      </select>

      <label for="shiftDate">Date</label>
      <input type="date" id="shiftDate" required>

      <label for="startTime">Start Time</label>
      <input type="time" id="startTime" required>

      <label for="endTime">End Time</label>
      <input type="time" id="endTime" required>

      <div class="modal-buttons">
        <button type="button" onclick="saveShift()">Save</button>
        <button type="button" onclick="closeShiftModal()">Cancel</button>
      </div>
    </form>
  </div>
</div>

<footer>
  <div class="footer-content">
    <div class="footer-section">
      <p>Â© 2025 CPUT Clinic Dashboard</p>
    </div>
  </div>
</footer>

<script>
// Sample doctor list (replace with your dynamic User Management data)
let doctors = [
  { id: 'D001', name: 'Dr. Sarah Lee' },
  { id: 'D002', name: 'Dr. Mark Smith' },
  { id: 'D003', name: 'Dr. Emily Johnson' }
];

let editingShift = false;

function populateDoctorDropdown() {
  const select = document.getElementById('doctorSelect');
  select.innerHTML = '<option value="">-- Select Doctor --</option>';
  doctors.forEach(doc => {
    const option = document.createElement('option');
    option.value = doc.name;
    option.textContent = doc.name;
    select.appendChild(option);
  });
}

function openShiftModal(id = null) {
  editingShift = !!id;
  document.getElementById('shiftId').value = id || '';
  document.getElementById('shiftForm').reset();
  populateDoctorDropdown();
  document.getElementById('shiftModalTitle').innerText = editingShift ? 'Edit Shift' : 'Add Shift';

  if (editingShift) {
    const row = document.querySelector(`#shift-body tr[data-id="${id}"]`);
    if (row) {
      document.getElementById('doctorSelect').value = row.children[1].textContent;
      document.getElementById('shiftDate').value = row.children[2].textContent;
      document.getElementById('startTime').value = row.children[3].textContent;
      document.getElementById('endTime').value = row.children[4].textContent;
    }
  }
  document.getElementById('shiftModal').style.display = 'flex';
}

function closeShiftModal() { document.getElementById('shiftModal').style.display = 'none'; }

function saveShift() {
  const id = document.getElementById('shiftId').value;
  const doctor = document.getElementById('doctorSelect').value;
  const date = document.getElementById('shiftDate').value;
  const start = document.getElementById('startTime').value;
  const end = document.getElementById('endTime').value;
  const tbody = document.getElementById('shift-body');

  if (!doctor || !date || !start || !end) return alert('Please fill all fields');

  if (editingShift) {
    const row = tbody.querySelector(`tr[data-id="${id}"]`);
    if (row) {
      row.children[1].textContent = doctor;
      row.children[2].textContent = date;
      row.children[3].textContent = start;
      row.children[4].textContent = end;
    }
  } else {
    const newId = 'S' + Math.floor(Math.random() * 1000).toString().padStart(3,'0');
    const newRow = document.createElement('tr');
    newRow.setAttribute('data-id', newId);
    newRow.innerHTML = `
      <td>${newId}</td>
      <td>${doctor}</td>
      <td>${date}</td>
      <td>${start}</td>
      <td>${end}</td>
      <td>Available</td>
      <td class="action-icons">
        <i class="fas fa-edit" onclick="openShiftModal('${newId}')"></i>
        <i class="fas fa-user-check" onclick="toggleAvailability('${newId}')"></i>
        <i class="fas fa-trash" onclick="deleteShift('${newId}')"></i>
      </td>`;
    tbody.appendChild(newRow);
  }

  closeShiftModal();
}

function deleteShift(id) {
  if (confirm('Delete this shift?')) {
    const row = document.querySelector(`#shift-body tr[data-id="${id}"]`);
    if (row) row.remove();
  }
}

function toggleAvailability(id) {
  const row = document.querySelector(`#shift-body tr[data-id="${id}"]`);
  if (row) {
    row.children[5].textContent = row.children[5].textContent === 'Available' ? 'Unavailable' : 'Available';
  }
}
</script>

</body>
</html>
